/*! For license information please see physics-lite.min.js.LICENSE */
!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=7)}([function(t,e){AFRAME.utils.entity.onModel=function(t,e,i){i&&(e=e.bind(i));var s=t.getObject3D("mesh"),n=function(i){i&&i.detail&&"mesh"===i.detail.type&&(e(),t.removeEventListener("object3dset",n))};s?e():t.addEventListener("object3dset",n)},AFRAME.utils.entity.onObject3DAdded=function(t,e,i,s,n){s&&(i=i.bind(s));var o=t.getObject3D(e),r=function(s){s&&s.detail&&s.detail.type===e&&(n?i(n):i(),t.removeEventListener("object3dset",r))};o?n?i(n):i():t.addEventListener("object3dset",r)},AFRAME.utils.entity.onLoad=function(t,e,i){i&&(e=e.bind(i));var s=function(){e(),t.removeEventListener("loaded",s)};t.hasLoaded?e():t.addEventListener("loaded",s,{once:!0})},AFRAME.utils.entity.onSceneLoaded=function(t,e,i){i&&(e=e.bind(i));var s=function(){e(),t.sceneEl.removeEventListener("loaded",s)};t.sceneEl.hasLoaded?e():t.sceneEl.addEventListener("loaded",s,{once:!0})},AFRAME.utils.device.hasControllers=function(){if(navigator){if(console.log("has navigator!"),navigator.getGamepads){console.log("has gamepad support!");var t=navigator.getGamepads(),e=0;return t?(Object.values(t).forEach(t=>{t&&e++}),e>0||null):null}return null}return null},AFRAME.utils.randomColor=function(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},AFRAME.utils.makeId=function(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=i.length,n=0;n<t;n++)e+=i.charAt(Math.floor(Math.random()*s));return e},AFRAME.utils.__helper__pool={__setDirection:{__axis:new THREE.Vector3,__quaternion:new THREE.Quaternion}},AFRAME.utils.math={normalize:function(t,e,i){return(t-i)/(e-i)},setDirection:function(t,e){if(e=e||AFRAME.utils.__helper__pool.__setDirection.__quaternion,t.y>.99999)e.set(0,0,0,1);else if(t.y<-.99999)e.set(1,0,0,0);else{AFRAME.utils.__helper__pool.__setDirection.__axis.set(t.z,0,-t.x).normalize();var i=Math.acos(t.y);e.setFromAxisAngle(AFRAME.utils.__helper__pool.__setDirection.__axis,i)}return e},vectorRadToDeg:function(t){return t.set(THREE.Math.radToDeg(t.x),THREE.Math.radToDeg(t.y),THREE.Math.radToDeg(t.z)),t},vectorRadToDegCopy:function(t){return t.x=THREE.Math.radToDeg(t.x),t.y=THREE.Math.radToDeg(t.y),t.z=THREE.Math.radToDeg(t.z),t},vectorDegToRad:function(t){return t.set(THREE.Math.degToRad(t.x),THREE.Math.degToRad(t.y),THREE.Math.degToRad(t.z)),t}},AFRAME.utils.getWhiteEnvironment=function(){if(!AFRAME.utils.whiteEnvironment){var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAMAAABFaP0WAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF/v7+////G/xoHAAAABBJREFUeNpiYGRkYGQECDAAABIABaUzXMUAAAAASUVORK5CYII=";AFRAME.utils.whiteEnvironment=(new THREE.CubeTextureLoader).load([t,t,t,t,t,t])}return AFRAME.utils.whiteEnvironment},AFRAME.utils.axishelper=function(){var t=new THREE.Vector3(0,0,0),e=new THREE.Group,i=new THREE.Geometry,s=new THREE.Geometry,n=new THREE.Geometry;i.vertices.push(t,new THREE.Vector3(0,1,0)),s.vertices.push(t,new THREE.Vector3(1,0,0)),n.vertices.push(t,new THREE.Vector3(0,0,1));var o=new THREE.Line(i,new THREE.LineBasicMaterial({color:"green"})),r=new THREE.Line(s,new THREE.LineBasicMaterial({color:"red"})),a=new THREE.Line(n,new THREE.LineBasicMaterial({color:"blue"}));return e.add(o),e.add(r),e.add(a),e},AFRAME.utils.shaders={},AFRAME.utils.getGradientShader=function(t,e,i){var s,n;AFRAME.utils.shaders[t]||(s=e&&!e.isColor?new THREE.Color(e):(new THREE.Color).copy(e),n=i&&!i.isColor?new THREE.Color(i):(new THREE.Color).copy(i),AFRAME.utils.shaders[t]=new THREE.RawShaderMaterial({fragmentShader:"precision mediump float;\n\nvarying vec2 vUv;\n\nuniform vec3 color1;\nuniform vec3 color2;\n\nvoid main( void ) {\n    vec3 mixCol = mix( color2, color1, vUv.y );\n\tgl_FragColor = vec4(mixCol, 1.);\n}",vertexShader:"precision highp float;\r\nprecision highp int;\r\n\r\nuniform mat4 modelMatrix;\r\nuniform mat4 modelViewMatrix;\r\nuniform mat4 projectionMatrix;\r\nuniform mat4 viewMatrix;\r\nuniform mat3 normalMatrix;\r\n\r\nattribute vec3 position;\r\nattribute vec3 normal;\r\nattribute vec2 uv;\r\nattribute vec2 uv2;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n  vUv = uv;\r\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n}",uniforms:{color1:{type:"c",glslType:"vec3",value:{r:s.r,g:s.g,b:s.b},description:"",textureId:null,runtime:{texture:null}},color2:{type:"c",glslType:"vec3",value:{r:n.r,g:n.g,b:n.b},description:"",textureId:null,runtime:{texture:null}}}}));return AFRAME.utils.shaders[t]},AFRAME.registerComponent("log-object3d",{init:function(){AFRAME.utils.entity.onModel(this.el,this.log,this)},log:function(){console.log(this.el.object3D)}})},function(t,e){t.exports={hand:AFRAME.registerComponent("oculus-quest-hands",{schema:{camera:{type:"selector",default:"#vr-camera"},model:{type:"asset"},hand:{type:"string",default:"right",oneOf:["right","left"]}},init:function(){this.el.setAttribute("grp__hands",""),this.el.setAttribute(`grp__hand${this.data.hand}`,""),this.setOtherHand=function(t){this.otherHandEl=t},this.eventHandlers={},this.el.setAttribute("tracked-controls",{hand:this.data.hand,headElement:this.data.camera,armModel:!0,autoHide:!0}),this.el.setAttribute("oculus-touch-controls",{hand:this.data.hand,model:!1,orientationOffset:{x:0,y:0,z:0}}),this.bindMethods=this.bindMethods.bind(this),this.bindMethods()},bindMethods:function(){this.onEntityLoaded=this.onEntityLoaded.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onController=this.onController.bind(this),this.addAnimationClip=this.addAnimationClip.bind(this),this.animateHand=this.animateHand.bind(this),this.registerEventListeners=this.registerEventListeners.bind(this),this.deregisterEventListeners=this.deregisterEventListeners.bind(this),this.dirty=null,this.getDirty=function(){return this.dirty},this.setDirty=async function(){this.dirty||(this.dirty=!0)},this.setDirty=this.setDirty.bind(this),this.getDirty=this.getDirty.bind(this),this.on=this.on.bind(this),this.determineHandGesture=this.determineHandGesture.bind(this),this.determineFingerGesture=this.determineFingerGesture.bind(this),AFRAME.utils.entity.onLoad(this.el,this.onEntityLoaded,this)},addAnimationClip:function(t){this.el.object3DMap.mesh.clips[t.name]=t,this.el.object3DMap.mesh.actions[t.name]=this.handMesh.mixer.clipAction(this.el.object3DMap.mesh.clips[t.name]),Object.assign(this.el.object3DMap.mesh.actions[t.name],this.animationConfig)},onController:function(){},onEntityLoaded:function(){var t=new THREE.GLTFLoader,e=this.data,i=this;t.load(e.model,(function(t){i.hand=t.scene,i.handMesh=t.scene.getObjectByName(`glove_${e.hand}`),i.handMesh.mixer=new THREE.AnimationMixer(i.handMesh),i.el.setObject3D("mesh",i.hand),AFRAME.utils.entity.onObject3DAdded(i.el,"mesh",i.onModelLoaded,i,t.animations)}),(function(t){e.debug&&1==e.debug&&console.log(`Model is ${t.loaded/t.total*100} % loaded`)}),(function(t){console.error(t)}))},onModelLoaded:function(t){this.el.object3DMap.mesh.clips={},this.el.object3DMap.mesh.actions={},this.animationConfig={repetitions:0,time:0,weight:0,loop:THREE.LoopRepeat,clampWhenFinished:!0},t.forEach(this.addAnimationClip),this.hasAnimations=!0,this.registerEventListeners(),this.el.setAttribute("collider",{autoRefresh:!0,static:!1,interval:10}),this.collider=this.el.components.collider},on:function(t,e){this.eventHandlers[t]=e,this.eventHandlers[t]=this.eventHandlers[t].bind(this),this.el.addEventListener(t,this.eventHandlers[t])},grab:function(){},registerEventListeners:function(){var t=null;this.on("triggertouchstart",(function(){this.el.removeState("pointing"),this.setDirty()})),this.on("triggertouchend",(function(){this.el.addState("pointing"),this.setDirty()})),this.on("gripdown",(function(){(t=this.collider.getIntersections("grabbable",!0))?(this.holdingEl=t.nearestEl,this.holdingEl.setAttribute("constraint",{parent:this.el}),this.el.is("holding-something")||(this.el.addState("holding-something"),this.holdingEl.emit("grabbed",{handEl:this.el,hand:this.data.hand}),this.el.emit("grab",{holdingEl:this.holdingEl})),this.holdingEl.components.grabbable&&this.holdingEl.components.grabbable.grab(this)):this.el.addState("gripping"),this.setDirty()})),this.on("gripup",(function(){this.el.is("holding-something")&&(this.holdingEl.removeAttribute("constraint"),this.el.removeState("holding-something"),this.holdingEl.components.grabbable&&this.holdingEl.components.grabbable.release(this),this.holdingEl=null),this.el.is("gripping")&&this.el.removeState("gripping"),this.setDirty()})),this.on("constraintchanged",(function(){this.el.is("holding-something")&&(this.el.removeState("holding-something"),this.holdingEl=null),this.el.is("gripping")&&this.el.removeState("gripping"),this.setDirty()}));var e=function(){this.el.removeState("thumbsup"),this.setDirty()},i=function(){this.el.addState("thumbsup"),this.setDirty()};this.on("thumbsticktouchstart",e),this.on("xbuttontouchstart",e),this.on("ybuttontouchstart",e),this.on("abuttontouchstart",e),this.on("bbuttontouchstart",e),this.on("thumbsticktouchend",i),this.on("xbuttontouchend",i),this.on("ybuttontouchend",i),this.on("abuttontouchend",i),this.on("bbuttontouchend",i)},determineFingerGesture:function(t){return"fist"!=t&&"open"!=t||(this.el.is("pointing")&&(t+="_point"),this.el.is("thumbsup")&&(t+="_thumb")),t},determineHandGesture:function(){this.el.is("gripping")?this.animateHand(this.determineFingerGesture("fist")):this.el.is("gripping")||this.animateHand(this.determineFingerGesture("open"))},deregisterEventListeners:function(){},animateHand:function(t){if(this.lastPose||(this.lastPose="open"),this.handMesh.mixer.stopAllAction(),this.lastPose==t)return this.handMesh.mixer.stopAllAction(),void this.el.object3DMap.mesh.actions[t].play();this.el.object3DMap.mesh.actions[t].time=0,this.el.object3DMap.mesh.actions[t].weight=1,this.el.object3DMap.mesh.actions[t].play(),this.el.object3DMap.mesh.actions[t].time=0,this.el.object3DMap.mesh.actions[this.lastPose].weight=0,this.el.object3DMap.mesh.actions[this.lastPose].play(),this.el.object3DMap.mesh.actions[this.lastPose].crossFadeTo(this.el.object3DMap.mesh.actions[t],.11,!0),this.lastPose=t},tick:function(t,e){this.getDirty()&&(this.dirty=null,this.determineHandGesture()),this.hasAnimations&&this.handMesh.mixer.update(e/1e3)}}),"group-system":AFRAME.registerSystem("grp",{init:async function(){var t=[],e=new Map;e.set("hands",[]).set("grabbable",[]).set("hoverable",[]).set("droppable",[]).set("draggable",[]).set("empty",[]).set("all",[]),this.subscribe=async function(i){var s;-1===t.indexOf(i.el)&&t.push(i.el),e.has(i.id)||e.set(i.id,[]),-1===(s=e.get(i.id)).indexOf(i.el)&&s.push(i.el),console.log(e)},this.subscribe=this.subscribe.bind(this),this.unsubscribe=async function(i){var s,n;-1!==(s=t.indexOf(i.el))?e.has(i.id)?-1!==(s=(n=e.get(i.id)).indexOf(i.el))?(n.splice(s,1),console.log(e)):console.log("not a member of group"):console.log("group does not exist"):console.log("not a member")},this.unsubscribe=this.unsubscribe.bind(this),this.getGroup=function(t){return e.has(t)?e.get(t):e.get("empty")},this.getGroup=this.getGroup.bind(this),this.hasGroup=function(t){return 1==e.has(t)||null},this.hasGroup=this.hasGroup.bind(this)}}),group:AFRAME.registerComponent("grp",{multiple:!0,init:async function(){this.id&&this.system.subscribe(this)},remove:async function(){this.id&&this.system.unsubscribe(this)}}),"collider-system":AFRAME.registerSystem("collider",{schema:{debug:{type:"boolean",default:!0}}}),"collider-component":AFRAME.registerComponent("collider",{schema:{interval:{type:"number",default:40},collidesWith:{type:"string",default:"none"},bounds:{type:"string",default:"auto",oneOf:["auto","proxy","box","mesh"]},size:{type:"vec3",default:{x:0,y:0,z:0}},static:{type:"boolean",default:!1},enabled:{type:"boolean",default:!0},autoRefresh:{type:"boolean",default:!1}},init:function(){this.el.setAttribute("grp__colliders",""),this.groupManager=this.el.sceneEl.systems.grp,this.__testA=new THREE.Vector3,this.__testB=new THREE.Vector3,this.AABB=new THREE.Box3,this.createAABBFromAuto=this.createAABBFromAuto.bind(this),this.createAABBFromMesh=this.createAABBFromMesh.bind(this),this.createAABBFromProxy=this.createAABBFromProxy.bind(this),this.createAABBFromBox=this.createAABBFromBox.bind(this),this.getIntersections=this.getIntersections.bind(this),this.updateIntersections=this.updateIntersections.bind(this),this.addIntersection=this.addIntersection.bind(this),this.removeIntersection=this.removeIntersection.bind(this),this.subscribe=this.subscribe.bind(this),this.clearedEls=[],this.intersectedEls=[],this.nearestEl=null,this.__distanceTest=1/0,this.__distanceNearest=1/0,this.__intersections=[],this.__intersectionsCleared=[],this.__elapsed=0},subscribe:function(){this.subscribed||(this.subscribed=!0,this.el.emit("colliderready",{el:this.el,collider:this},!1))},update:function(t){if(!t.bounds||t.bounds&&t.bounds!==this.data.bounds)switch(this.data.bounds){case"box":this.createAABBFromBox();break;case"proxy":AFRAME.utils.entity.onObject3DAdded(this.el,"proxy",this.createAABBFromProxy,this);break;case"mesh":AFRAME.utils.entity.onModel(this.el,this.createAABBFromMesh,this);break;case"auto":default:AFRAME.utils.entity.onModel(this.el,this.createAABBFromAuto,this)}},createAABBFromAuto:function(){this.AABB.setFromObject(this.el.object3DMap.mesh);var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3;this.AABB.getSize(t),this.AABB.getCenter(e),this.el.object3D.getWorldPosition(i),e.sub(i),t.divide(this.el.object3D.scale),this.el.setAttribute("proxy",{size:t,offset:e}),this.AABB.setFromObject(this.el.object3DMap.proxy);var s=new THREE.Box3Helper(this.AABB);this.el.sceneEl.object3D.add(s),this.updateAABB=function(){this.AABB.setFromObject(this.el.object3DMap.proxy)},this.updateAABB=this.updateAABB.bind(this),this.subscribe()},createAABBFromBox:function(){var t=new THREE.Vector3;this.el.object3D.getWorldPosition(t),this.AABB.setFromCenterAndSize(t,this.data.size);var e=new THREE.Box3Helper(this.AABB);this.el.sceneEl.object3D.add(e),this.updateAABB=function(){this.el.object3D.getWorldPosition(t),this.AABB.setFromCenterAndSize(t,this.data.size)},this.updateAABB=this.updateAABB.bind(this),this.subscribe()},createAABBFromProxy:function(){this.AABB.setFromObject(this.el.object3DMap.proxy);var t=new THREE.Box3Helper(this.AABB);this.el.sceneEl.object3D.add(t),this.updateAABB=function(){this.AABB.setFromObject(this.el.object3DMap.proxy)},this.updateAABB=this.updateAABB.bind(this),this.subscribe()},createAABBFromMesh:function(){this.AABB.setFromObject(this.el.object3DMap.mesh);var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3;this.AABB.getSize(t),this.AABB.getCenter(e),this.el.object3D.getWorldPosition(i),e.sub(i),t.divide(this.el.object3D.scale);var s=new THREE.Box3Helper(this.AABB);this.el.sceneEl.object3D.add(s),this.updateAABB=function(){this.AABB.setFromObject(this.el.object3DMap.mesh)},this.updateAABB=this.updateAABB.bind(this),this.subscribe()},getIntersections:function(t,e){var i=this.groupManager.getGroup(t),s=i.length;if(s<1)return null;e&&1==e&&this.updateAABB();for(var n,o=1/0,r=1/0,a=[],h=null,l=0;l<s;l++)n=i[l].components.collider,e&&1==e&&n.updateAABB(),1==this.AABB.intersectsBox(n.AABB)&&1==n.data.enabled&&(a.push(n.el),this.el.object3D.getWorldPosition(this.__testA),n.el.object3D.getWorldPosition(this.__testB),(o=this.__testA.distanceToSquared(this.__testB))<r&&(r=o,h=n.el));return h?{intersectedEls:a,nearestEl:h}:null},addIntersection:function(t){-1===this.intersectedEls.indexOf(t)&&(0!==this.intersectedEls.length||this.el.is("colliding")||this.el.addState("colliding"),this.intersectedEls.push(t),this.el.emit("hitstart",{el:t,intersectedEls:this.intersectedEls,nearestEl:this.nearestEl},!1),t.emit("hitstart",{el:t},!1))},removeIntersection:function(t){if(-1!==this.intersectedEls.indexOf(t)){var e=this.intersectedEls.indexOf(t);this.intersectedEls.splice(e,1),this.el.emit("hitend",{clearedEl:t,intersectedEls:this.intersectedEls},!1),t.emit("hitend",{clearedEl:t,intersectedEls:this.intersectedEls},!1)}0===this.intersectedEls.length&&this.el.is("colliding")&&this.el.removeState("colliding")},updateIntersections:function(){var t=this.groupManager.getGroup(this.data.collidesWith);if(this.__stepMax=t.length,!(this.__stepMax<1)){var e;for(this.__distanceNearest=1/0,this.__distanceTest=0,this.__intersections.splice(0,this.__intersections.length),this.__intersectionsCleared.splice(0,this.__intersectionsCleared.length),this.__nearestEl=null,this.__step=0,this.__step=0;this.__step<this.__stepMax;this.__step++)1==(e=t[this.__step].components.collider).data.enabled&&(1==this.AABB.intersectsBox(e.AABB)?(this.el.object3D.getWorldPosition(this.__testA),e.el.object3D.getWorldPosition(this.__testB),this.__distanceTest=this.__testA.distanceToSquared(this.__testB),this.__distanceTest<this.__distanceNearest&&(this.__distanceNearest=this.__distanceTest,this.__nearestEl=e.el),this.__intersections.push(e.el)):this.__intersectionsCleared.push(e.el));for(this.nearestEl=this.__nearestEl,this.__stepMax=this.__intersections.length,this.__step=0;this.__step<this.__stepMax;this.__step++)this.addIntersection(this.__intersections[this.__step]);for(this.__stepMax=this.__intersectionsCleared.length,this.__step=0;this.__step<this.__stepMax;this.__step++)this.removeIntersection(this.__intersectionsCleared[this.__step])}},tick:function(t,e){this.subscribed&&0!=this.data.enabled&&(this.__elapsed=this.__elapsed+e,this.__elapsed<this.data.interval||(this.__elapsed=0,!0!==this.data.static&&this.updateAABB(),!0===this.data.autoRefresh&&this.updateIntersections()))},remove:function(){"auto"==this.data.bounds&&this.el.object3DMap.proxy&&this.el.removeAttribute("proxy")}}),speed:AFRAME.registerComponent("speed",{dependencies:["position","rotation","scale","velocity"],schema:{type:"vec3",default:new THREE.Vector3(0,0,0)},init:function(){}}),"velocity-system":AFRAME.registerSystem("velocity",{schema:{interval:{type:"number",default:30},debug:{type:"boolean",default:!0}}}),velocity:AFRAME.registerComponent("velocity",{dependencies:["position","rotation","scale"],schema:{type:"vec3",default:new THREE.Vector3(0,0,0)},init:function(){if(this.interval=Math.ceil(1e3/this.system.data.interval),this.__elapsed=0,this.WorldPosition=new THREE.Vector3,this.WorldPositionLast=new THREE.Vector3,this.step=new THREE.Vector3,this.stepDelta=new THREE.Vector3,this.stepNext=new THREE.Vector3,1==this.system.data.debug){var t=this;this.speedometer=document.createElement("a-entity");t.el.appendChild(this.speedometer),t.speedometer.setAttribute("text",{align:"center",width:"0.25",anchor:"align",baseline:"center",wrapCount:20}),t.speedometer.updateText=function(e){e=String(e),t.speedometer.setAttribute("text",{value:e})},AFRAME.utils.entity.onModel(this.el,(function(){var t=(new THREE.Box3).setFromObject(this.el.object3DMap.mesh),e=new THREE.Vector3;t.getSize(e),this.speedometer.object3D.translateY(e.y/2+.1)}),this)}},tick:function(t,e){this.__elapsed+=e,this.__elapsed<this.interval||(this.__elapsed=0,this.el.object3D.getWorldPosition(this.WorldPosition),this.stepDelta.copy(this.WorldPosition).sub(this.WorldPositionLast),this.data.copy(this.stepDelta),this.speedometer&&this.speedometer.updateText(`x: ${this.data.x.toFixed(2)}, \ny: ${this.data.y.toFixed(2)},\nz: ${this.data.z.toFixed(2)}`),this.WorldPositionLast.copy(this.WorldPosition))}}),"collider-proxy-system":AFRAME.registerSystem("proxy",{schema:{debug:{type:"boolean",default:!0}},init:function(){this.material=new THREE.MeshBasicMaterial({wireframe:!0,color:"red",visible:this.data.debug})}}),"collider-proxy-component":AFRAME.registerComponent("proxy",{schema:{orient:{type:"vec3",default:{x:0,y:0,z:0}},offset:{type:"vec3",default:{x:0,y:0,z:0}},size:{type:"vec3",default:{x:1,y:1,z:1}}},init:function(){this.geometry=new THREE.BoxBufferGeometry(this.data.size.x,this.data.size.y,this.data.size.z),this.proxy=new THREE.Mesh(this.geometry,this.system.material),this.setRotation=this.setRotation.bind(this),this.setPosition=this.setPosition.bind(this),this.setRotation(this.data.orient),this.setPosition(this.data.offset),this.proxy.visible=this.system.data.debug,this.el.setObject3D("proxy",this.proxy),this.el.object3DMap.proxy.updateWorldMatrix(!0,!0),this.el.object3DMap.proxy.updateMatrixWorld(!0)},setPosition:function(t){this.proxy.position.set(t.x,t.y,t.z)},setRotation:function(t){this.proxy.rotation.set(THREE.Math.degToRad(t.x),THREE.Math.degToRad(t.y),THREE.Math.degToRad(t.z))},remove:function(){this.el.object3DMap.proxy&&this.el.removeObject3D("proxy")},update:function(t){if(t.size){if(0==AFRAME.utils.deepEqual(t.size,this.data.size))return this.remove(),void this.init();this.setRotation(this.data.orient),this.setPosition(this.data.offset)}}}),constraint:AFRAME.registerComponent("constraint",{schema:{parent:{type:"selector"}},init:function(){this.originalParent=this.el.object3D.parent},update:function(t){this.data.parent.object3DMap.constraint||this.data.parent.setObject3D("constraint",new THREE.Group),this.data.parent.object3DMap.constraint.attach(this.el.object3D),this.el.addState(this.data.parent),t.parent&&t.parent!==this.data.parent&&(this.el.emit("constraintchanged",{parent:this.data.parent,el:this.el},!0),t.parent.emit("constraintchanged",{parent:this.data.parent,el:this.el},!0)),t.parent||(this.el.emit("constraintadded",{parent:this.data.parent,el:this.el},!0),this.data.parent.emit("constraintadded",{parent:this.data.parent,el:this.el},!0))},remove:function(){this.originalParent.attach(this.el.object3D),this.el.removeState("constrained"),this.el.emit("constraintremoved",{parent:this.data.parent,el:this.el},!1),this.data.parent.emit("constraintremoved",{parent:this.data.parent,el:this.el},!1)}}),grabbable:AFRAME.registerComponent("grabbable",{dependencies:["collider"],schema:{enabled:{type:"boolean",default:!0}},init:function(){this.grab=this.grab.bind(this),this.release=this.release.bind(this),this.originalColliderProperties=JSON.parse(JSON.stringify(AFRAME.utils.entity.getComponentProperty(this.el,"collider"))),this.originalColliderProperties.bounds&&delete this.originalColliderProperties.bounds},grab:function(t){this.el.setAttribute("collider",{autoRefresh:!1,static:!1,interval:20})},release:function(t){this.el.setAttribute("collider",this.originalColliderProperties)},update:function(){this.el.setAttribute("grp__grabbable","")},remove:function(){}})}},,,,,,function(t,e,i){i(0),i(1)}]);