/*! For license information please see SuperQuest.slim.min.js.LICENSE */
!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=9)}([function(t,e){AFRAME.utils.entity.onModel=function(t,e,i){i&&(e=e.bind(i));var n=t.getObject3D("mesh"),s=function(i){i&&i.detail&&"mesh"===i.detail.type&&(e(),t.removeEventListener("object3dset",s))};n?e():t.addEventListener("object3dset",s)},AFRAME.utils.entity.onObject3DAdded=function(t,e,i,n,s){n&&(i=i.bind(n));var o=t.getObject3D(e),r=function(n){n&&n.detail&&n.detail.type===e&&(s?i(s):i(),t.removeEventListener("object3dset",r))};o?s?i(s):i():t.addEventListener("object3dset",r)},AFRAME.utils.entity.onLoad=function(t,e,i){i&&(e=e.bind(i));var n=function(){e(),t.removeEventListener("loaded",n)};t.hasLoaded?e():t.addEventListener("loaded",n,{once:!0})},AFRAME.utils.entity.onSceneLoaded=function(t,e,i){i&&(e=e.bind(i));var n=function(){t.sceneEl.hasLoaded?e():setTimeout(n,100)};t.sceneEl.hasLoaded?e():n()},AFRAME.utils.device.hasControllers=function(){if(navigator){if(console.log("has navigator!"),navigator.getGamepads){console.log("has gamepad support!");var t=navigator.getGamepads(),e=0;return t?(Object.values(t).forEach(t=>{t&&e++}),e>0||null):null}return null}return null},AFRAME.utils.randomColor=function(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},AFRAME.utils.makeId=function(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=i.length,s=0;s<t;s++)e+=i.charAt(Math.floor(Math.random()*n));return e},AFRAME.utils.__helper__pool={__setDirection:{__axis:new THREE.Vector3,__quaternion:new THREE.Quaternion}},AFRAME.utils.math={normalize:function(t,e,i){return(t-i)/(e-i)},setDirection:function(t,e){if(e=e||AFRAME.utils.__helper__pool.__setDirection.__quaternion,t.y>.99999)e.set(0,0,0,1);else if(t.y<-.99999)e.set(1,0,0,0);else{AFRAME.utils.__helper__pool.__setDirection.__axis.set(t.z,0,-t.x).normalize();var i=Math.acos(t.y);e.setFromAxisAngle(AFRAME.utils.__helper__pool.__setDirection.__axis,i)}return e},vectorRadToDeg:function(t){return t.set(THREE.Math.radToDeg(t.x),THREE.Math.radToDeg(t.y),THREE.Math.radToDeg(t.z)),t},vectorRadToDegCopy:function(t){return t.x=THREE.Math.radToDeg(t.x),t.y=THREE.Math.radToDeg(t.y),t.z=THREE.Math.radToDeg(t.z),t},vectorDegToRad:function(t){return t.set(THREE.Math.degToRad(t.x),THREE.Math.degToRad(t.y),THREE.Math.degToRad(t.z)),t}},AFRAME.utils.getWhiteEnvironment=function(){if(!AFRAME.utils.whiteEnvironment){var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAMAAABFaP0WAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF/v7+////G/xoHAAAABBJREFUeNpiYGRkYGQECDAAABIABaUzXMUAAAAASUVORK5CYII=";AFRAME.utils.whiteEnvironment=(new THREE.CubeTextureLoader).load([t,t,t,t,t,t])}return AFRAME.utils.whiteEnvironment},AFRAME.utils.axishelper=function(){var t=new THREE.Vector3(0,0,0),e=new THREE.Group,i=new THREE.Geometry,n=new THREE.Geometry,s=new THREE.Geometry;i.vertices.push(t,new THREE.Vector3(0,1,0)),n.vertices.push(t,new THREE.Vector3(1,0,0)),s.vertices.push(t,new THREE.Vector3(0,0,1));var o=new THREE.Line(i,new THREE.LineBasicMaterial({color:"green"})),r=new THREE.Line(n,new THREE.LineBasicMaterial({color:"red"})),a=new THREE.Line(s,new THREE.LineBasicMaterial({color:"blue"}));return e.add(o),e.add(r),e.add(a),e},AFRAME.utils.shaders={},AFRAME.utils.getGradientShader=function(t,e,i){var n,s;AFRAME.utils.shaders[t]||(n=e&&!e.isColor?new THREE.Color(e):(new THREE.Color).copy(e),s=i&&!i.isColor?new THREE.Color(i):(new THREE.Color).copy(i),AFRAME.utils.shaders[t]=new THREE.RawShaderMaterial({fragmentShader:"precision mediump float;\n\nvarying vec2 vUv;\n\nuniform vec3 color1;\nuniform vec3 color2;\n\nvoid main( void ) {\n    vec3 mixCol = mix( color2, color1, vUv.y );\n\tgl_FragColor = vec4(mixCol, 1.);\n}",vertexShader:"precision highp float;\r\nprecision highp int;\r\n\r\nuniform mat4 modelMatrix;\r\nuniform mat4 modelViewMatrix;\r\nuniform mat4 projectionMatrix;\r\nuniform mat4 viewMatrix;\r\nuniform mat3 normalMatrix;\r\n\r\nattribute vec3 position;\r\nattribute vec3 normal;\r\nattribute vec2 uv;\r\nattribute vec2 uv2;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n  vUv = uv;\r\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n}",uniforms:{color1:{type:"c",glslType:"vec3",value:{r:n.r,g:n.g,b:n.b},description:"",textureId:null,runtime:{texture:null}},color2:{type:"c",glslType:"vec3",value:{r:s.r,g:s.g,b:s.b},description:"",textureId:null,runtime:{texture:null}}}}));return AFRAME.utils.shaders[t]},AFRAME.registerComponent("log-object3d",{init:function(){AFRAME.utils.entity.onModel(this.el,this.log,this)},log:function(){console.log(this.el.object3D)}})},function(t,e,i){const n=i(2);t.exports={"group-system":AFRAME.registerSystem("grp",{init:async function(){var t=[],e=new Map;e.set("hands",[]).set("grabbable",[]).set("hoverable",[]).set("droppable",[]).set("draggable",[]).set("empty",[]).set("all",[]),this.subscribe=async function(i){var n;-1===t.indexOf(i.el)&&t.push(i.el),e.has(i.id)||e.set(i.id,[]),-1===(n=e.get(i.id)).indexOf(i.el)&&n.push(i.el)},this.subscribe=this.subscribe.bind(this),this.unsubscribe=async function(i){var n,s;-1!==(n=t.indexOf(i.el))?e.has(i.id)?-1!==(n=(s=e.get(i.id)).indexOf(i.el))?s.splice(n,1):console.log("not a member of group"):console.log("group does not exist"):console.log("not a member")},this.unsubscribe=this.unsubscribe.bind(this),this.getGroup=function(t){return e.has(t)?e.get(t):e.get("empty")},this.getGroup=this.getGroup.bind(this),this.hasGroup=function(t){return 1==e.has(t)||null},this.hasGroup=this.hasGroup.bind(this)}}),"tween-system":AFRAME.registerSystem("twn",{tick:function(t){n.update(t)}}),group:AFRAME.registerComponent("grp",{multiple:!0,init:async function(){this.id&&this.system.subscribe(this)},remove:async function(){this.id&&this.system.unsubscribe(this)}}),"hand-alignments":AFRAME.registerComponent("hand-aligns",{schema:{src:{type:"asset"},hand:{type:"string",oneOf:["left","right"]},debug:{type:"boolean",default:!1}},multiple:!0,init:function(){var t=this.el,e=this.data.hand,i=this.data.debug;(new THREE.ObjectLoader).load(this.data.src,n=>{n.children.forEach(n=>{var s=n.position,o=AFRAME.utils.math.vectorRadToDeg(n.rotation.toVector3(new THREE.Vector3));if("left"===e&&(s.x=-1*s.x,o.y=-1*o.y),t.setAttribute(n.name,{offset:s,orient:o,debug:i}),!0===i){var r=`<a-text position="${n.position.x} ${n.position.y} ${n.position.z}"  \n\t\t\t\t\t\tscale="0.1 0.1 0.1" look-at="#vr-camera" value="${n.name}" text="align: center; width: 1;"></a-text>`;t.insertAdjacentHTML("afterbegin",r)}})})},remove:function(){}}),hand:AFRAME.registerComponent("oculus-quest-hands",{schema:{camera:{type:"selector",default:"#vr-camera"},src:{type:"asset"},hand:{type:"string",default:"right",oneOf:["right","left"]},alignSrc:{type:"asset"},debug:{type:"boolean",default:!1}},init:function(){this.el.setAttribute("grp__hands",""),this.el.setAttribute(`grp__hand${this.data.hand}`,""),this.setOtherHand=function(t){this.otherHandEl=t},this.eventHandlers={},this.el.setAttribute("tracked-controls",{hand:this.data.hand,headElement:this.data.camera,armModel:!0,autoHide:!1}),this.el.setAttribute("oculus-touch-controls",{hand:this.data.hand,model:!1,orientationOffset:{x:0,y:0,z:0}}),this.bindMethods=this.bindMethods.bind(this),this.bindMethods()},bindMethods:function(){this.onEntityLoaded=this.onEntityLoaded.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.addAnimationClip=this.addAnimationClip.bind(this),this.animateHand=this.animateHand.bind(this),this.registerEventListeners=this.registerEventListeners.bind(this),this.deregisterEventListeners=this.deregisterEventListeners.bind(this),this.dirty=null,this.getDirty=function(){return this.dirty},this.setDirty=async function(){this.dirty||(this.dirty=!0)},this.setDirty=this.setDirty.bind(this),this.getDirty=this.getDirty.bind(this),this.on=this.on.bind(this),this.determineHandGesture=this.determineHandGesture.bind(this),this.determineFingerGesture=this.determineFingerGesture.bind(this),AFRAME.utils.entity.onLoad(this.el,this.onEntityLoaded,this)},addAnimationClip:function(t){this.el.object3DMap.mesh.clips[t.name]=t,this.el.object3DMap.mesh.actions[t.name]=this.handMesh.mixer.clipAction(this.el.object3DMap.mesh.clips[t.name]),Object.assign(this.el.object3DMap.mesh.actions[t.name],this.animationConfig)},onEntityLoaded:function(){var t=new THREE.GLTFLoader,e=this.data,i=this;t.load(e.src,(function(t){i.hand=t.scene,i.handMesh=t.scene.getObjectByName(`glove_${e.hand}`),i.handMesh.mixer=new THREE.AnimationMixer(i.handMesh),i.el.setObject3D("mesh",i.hand),AFRAME.utils.entity.onObject3DAdded(i.el,"mesh",i.onModelLoaded,i,t.animations)}),(function(t){e.debug&&1==e.debug&&console.log(`Model is ${t.loaded/t.total*100} % loaded`)}),(function(t){console.error(t)}))},onModelLoaded:function(t){this.el.object3DMap.mesh.clips={},this.el.object3DMap.mesh.actions={},this.animationConfig={repetitions:0,time:0,weight:0,loop:THREE.LoopRepeat,clampWhenFinished:!0},t.forEach(this.addAnimationClip),this.hasAnimations=!0,this.el.setAttribute("proxy",{debug:this.data.debug,shape:"oct",size:{x:.045,y:.085,z:.125},offset:{x:"right"==this.data.hand?-.007:.007,y:-.036,z:.002}}),this.el.setAttribute("collider",{bounds:"proxy",debug:this.data.debug,autoRefresh:!0,static:!1,interval:10}),this.collider=this.el.components.collider,this.el.setAttribute("hand-aligns",{hand:this.data.hand,src:this.data.alignSrc,debug:this.data.debug}),this.registerEventListeners()},on:function(t,e){e=e.bind(this),this.eventHandlers[t]=e,this.el.addEventListener(t,this.eventHandlers[t])},registerEventListeners:function(){var t=null,e=this;e.onTriggerTouchStart=function(){e.el.is("pointing")&&(e.el.removeState("pointing"),e.el.emit("pointend",{handEl:e.el,hand:e.data.hand})),e.setDirty()},e.onTriggerTouchEnd=function(){e.el.is("holding-something")||(e.el.addState("pointing"),e.el.emit("pointstart",{handEl:e.el,hand:e.data.hand})),e.setDirty()},e.onGripDown=function(){(t=e.collider.getIntersections("grabbable",!0))?(e.holdingEl=t.nearestEl,e.holdingEl.setAttribute("constraint",{parent:e.el}),e.el.is("holding-something")||(e.el.addState("holding-something"),e.holdingEl.emit("grabbed",{handEl:e.el,hand:e.data.hand}),e.el.emit("grab",{holdingEl:e.holdingEl})),e.holdingEl.components.grabbable&&(e.holdingEl.components.grabbable.grab(e),e.holdPose=e.holdingEl.components.grabbable.data.pose,"none"===e.holdPose&&(e.el.object3DMap.mesh.visible=!1),e.el.addState("pose"))):e.el.addState("gripping"),e.setDirty()},e.onGripUp=function(){e.el.is("holding-something")&&(e.holdingEl.components.grabbable&&e.holdingEl.components.grabbable.release(e),"none"===e.holdPose&&(e.el.object3DMap.mesh.visible=!0),e.holdingEl.removeAttribute("constraint"),e.el.removeState("holding-something"),e.holdPose=null,e.holdingEl.emit("released",{handEl:e.el,hand:e.data.hand}),e.el.emit("release",{holdingEl:e.holdingEl}),e.holdingEl=null),e.el.is("gripping")&&e.el.removeState("gripping"),e.el.is("pose")&&e.el.removeState("pose"),e.setDirty()},e.onConstraintChanged=function(){e.el.is("holding-something")&&(e.el.removeState("holding-something"),e.holdingEl=null,e.holdPose=null,"none"===e.holdPose&&(e.el.object3DMap.mesh.visible=!0)),e.el.is("gripping")&&e.el.removeState("gripping"),e.el.is("pose")&&e.el.removeState("pose"),e.setDirty()},e.onThumbTouchStart=function(){e.el.removeState("thumbsup"),e.setDirty()},e.onThumbTouchEnd=function(){e.el.is("holding-something")||e.el.addState("thumbsup"),e.setDirty()},e.el.addEventListener("gripdown",e.onGripDown),e.el.addEventListener("gripup",e.onGripUp),e.el.addEventListener("constraintchanged",e.onConstraintChanged),e.el.addEventListener("triggertouchend",e.onTriggerTouchEnd),e.el.addEventListener("triggertouchstart",e.onTriggerTouchStart),e.el.addEventListener("thumbsticktouchstart",e.onThumbTouchStart),e.el.addEventListener("xbuttontouchstart",e.onThumbTouchStart),e.el.addEventListener("ybuttontouchstart",e.onThumbTouchStart),e.el.addEventListener("abuttontouchstart",e.onThumbTouchStart),e.el.addEventListener("bbuttontouchstart",e.onThumbTouchStart),e.el.addEventListener("thumbsticktouchend",e.onThumbTouchEnd),e.el.addEventListener("xbuttontouchend",e.onThumbTouchEnd),e.el.addEventListener("ybuttontouchend",e.onThumbTouchEnd),e.el.addEventListener("abuttontouchend",e.onThumbTouchEnd),e.el.addEventListener("bbuttontouchend",e.onThumbTouchEnd)},determineFingerGesture:function(t){return"fist"!=t&&"open"!=t||(this.el.is("pointing")&&(t+="_point"),this.el.is("thumbsup")&&(t+="_thumb")),t},determineHandGesture:function(){this.el.is("gripping")&&!this.el.is("holding-something")?this.animateHand(this.determineFingerGesture("fist")):this.el.is("gripping")||this.el.is("holding-something")?this.el.is("holding-something")&&this.el.is("pose")&&null!==this.holdPose&&"none"!==this.holdPose?this.animateHand(this.holdPose):this.el.is("holding-something")&&this.el.is("pose")&&"none"==this.holdPose&&(this.el.object3DMap.mesh.visible=!1,this.animateHand("fist")):this.animateHand(this.determineFingerGesture("open"))},deregisterEventListeners:function(){},animateHand:function(t){if(this.lastPose||(this.lastPose="open"),this.handMesh.mixer.stopAllAction(),this.lastPose==t)return this.handMesh.mixer.stopAllAction(),void this.el.object3DMap.mesh.actions[t].play();this.el.object3DMap.mesh.actions[t].time=0,this.el.object3DMap.mesh.actions[t].weight=1,this.el.object3DMap.mesh.actions[t].play(),this.el.object3DMap.mesh.actions[t].time=0,this.el.object3DMap.mesh.actions[this.lastPose].weight=0,this.el.object3DMap.mesh.actions[this.lastPose].play(),this.el.object3DMap.mesh.actions[this.lastPose].crossFadeTo(this.el.object3DMap.mesh.actions[t],.11,!0),this.lastPose=t},tick:function(t,e){this.getDirty()&&(this.dirty=null,this.determineHandGesture()),this.hasAnimations&&this.handMesh.mixer.update(e/1e3)}}),grabbable:AFRAME.registerComponent("grabbable",{dependencies:["collider"],schema:{enabled:{type:"boolean",default:!0},handAlign:{type:"string",default:"none"},pose:{type:"string",default:"none"},centerAlign:{type:"string",default:"none"},debug:{type:"boolean",default:!1}},init:function(){this.grab=this.grab.bind(this),this.release=this.release.bind(this),this.align=this.align.bind(this),this.registerEventListeners=this.registerEventListeners.bind(this),this.el.setAttribute("grp__grabbable",""),this.originalColliderProperties=JSON.parse(JSON.stringify(AFRAME.utils.entity.getComponentProperty(this.el,"collider"))),this.originalColliderProperties.bounds&&delete this.originalColliderProperties.bounds,this.targetPosition=new THREE.Vector3,this.targetQuaternion=new THREE.Quaternion,this.intermediatePos=new THREE.Vector3,this.intermediateQuat=new THREE.Quaternion,this.startPos=new THREE.Vector3,this.startQuat=new THREE.Quaternion;var t={value:0};this.registerEventListeners(),this.tween=new n.Tween(t).to({value:1}).easing(n.Easing.Quadratic.Out).onUpdate(()=>{console.log(t)})},registerEventListeners:function(){},grab:function(t){this.el.setAttribute("collider",{autoRefresh:!1,static:!1,interval:20}),"none"!==this.handAlign&&t.el.components[`aligner__${this.data.handAlign}`]&&(console.log(this),this.align(t.el.object3DMap[`aligner__${this.data.handAlign}`]))},align:function(t){this.targetPosition.copy(t.position),this.targetQuaternion.copy(t.quaternion),this.startPos.copy(this.el.object3D.position),this.startQuat.copy(this.el.object3D.quaternion),this.alignUpdate=!0,this.alignWeight=0,this.tween.play()},release:function(t){this.el.setAttribute("collider",this.originalColliderProperties)}}),"collider-component":AFRAME.registerComponent("collider",{schema:{interval:{type:"number",default:40},collidesWith:{type:"string",default:"none"},bounds:{type:"string",default:"auto",oneOf:["auto","proxy","box","mesh","computed"]},size:{type:"vec3",default:{x:0,y:0,z:0}},static:{type:"boolean",default:!1},enabled:{type:"boolean",default:!0},autoRefresh:{type:"boolean",default:!1},debug:{type:"boolean",default:!1}},init:function(){if(this.el.setAttribute("grp__colliders",""),this.groupManager=this.el.sceneEl.systems.grp,this.__testA=new THREE.Vector3,this.__testB=new THREE.Vector3,this.AABB=new THREE.Box3,!0===this.data.debug){var t=new THREE.Box3Helper(this.AABB);this.el.sceneEl.object3D.add(t)}this.createAABBFromAuto=this.createAABBFromAuto.bind(this),this.createAABBFromMesh=this.createAABBFromMesh.bind(this),this.createAABBFromProxy=this.createAABBFromProxy.bind(this),this.createAABBFromBox=this.createAABBFromBox.bind(this),this.createAABBFromComputed=this.createAABBFromComputed.bind(this),this.getIntersections=this.getIntersections.bind(this),this.updateIntersections=this.updateIntersections.bind(this),this.addIntersection=this.addIntersection.bind(this),this.removeIntersection=this.removeIntersection.bind(this),this.subscribe=this.subscribe.bind(this),this.clearedEls=[],this.intersectedEls=[],this.nearestEl=null,this.__distanceTest=1/0,this.__distanceNearest=1/0,this.__intersections=[],this.__intersectionsCleared=[],this.__elapsed=0},subscribe:function(){this.subscribed||(this.subscribed=!0,this.el.emit("colliderready",{el:this.el,collider:this},!1))},update:function(t){if(!t.bounds||t.bounds&&t.bounds!==this.data.bounds)switch(this.data.bounds){case"box":this.createAABBFromBox();break;case"proxy":AFRAME.utils.entity.onObject3DAdded(this.el,"proxy",this.createAABBFromProxy,this);break;case"computed":AFRAME.utils.entity.onObject3DAdded(this.el,"proxy",this.createAABBFromComputed,this);break;case"mesh":AFRAME.utils.entity.onModel(this.el,this.createAABBFromMesh,this);break;case"auto":default:AFRAME.utils.entity.onModel(this.el,this.createAABBFromAuto,this)}},createAABBFromAuto:function(){this.el.object3D.updateWorldMatrix(!0,!0),this.el.object3D.updateMatrixWorld(!0),this.AABB.setFromObject(this.el.object3DMap.mesh);var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3;this.AABB.getSize(t),this.AABB.getCenter(e),this.el.object3D.getWorldPosition(i),e.sub(i),t.divide(this.el.object3D.scale),this.el.setAttribute("proxy",{size:t}),this.AABB.setFromObject(this.el.object3DMap.proxy),this.updateAABB=function(){this.AABB.setFromObject(this.el.object3DMap.proxy)},this.updateAABB=this.updateAABB.bind(this),this.subscribe()},createAABBFromComputed:function(){this.el.object3DMap.proxy.geometry.computeBoundingBox(),this.AABB=this.el.object3DMap.proxy.geometry.boundingBox.clone(),this.updateAABB=function(){this.el.object3DMap.proxy.geometry.computeBoundingBox(),this.el.object3DMap.proxy.updateMatrixWorld(!0),this.AABB.copy(this.el.object3DMap.proxy.geometry.boundingBox).applyMatrix4(this.el.object3DMap.proxy.matrixWorld)},this.updateAABB=this.updateAABB.bind(this),this.subscribe()},createAABBFromBox:function(){var t=new THREE.Vector3;this.el.object3D.getWorldPosition(t),this.AABB.setFromCenterAndSize(t,this.data.size),this.updateAABB=function(){this.el.object3D.getWorldPosition(t),this.AABB.setFromCenterAndSize(t,this.data.size)},this.updateAABB=this.updateAABB.bind(this),this.subscribe()},createAABBFromProxy:function(){this.AABB.setFromObject(this.el.object3DMap.proxy),this.updateAABB=function(){this.AABB.setFromObject(this.el.object3DMap.proxy)},this.updateAABB=this.updateAABB.bind(this),this.subscribe()},createAABBFromMesh:function(){this.AABB.setFromObject(this.el.object3DMap.mesh);var t=new THREE.Vector3,e=new THREE.Vector3,i=new THREE.Vector3;this.AABB.getSize(t),this.AABB.getCenter(e),this.el.object3D.getWorldPosition(i),e.sub(i),t.divide(this.el.object3D.scale),this.updateAABB=function(){this.AABB.setFromObject(this.el.object3DMap.mesh)},this.updateAABB=this.updateAABB.bind(this),this.subscribe()},getIntersections:function(t,e){var i=this.groupManager.getGroup(t),n=i.length;if(n<1)return null;e&&1==e&&this.updateAABB();for(var s,o=1/0,r=1/0,a=[],h=null,l=0;l<n;l++)s=i[l].components.collider,e&&1==e&&s.updateAABB(),1==this.AABB.intersectsBox(s.AABB)&&1==s.data.enabled&&(a.push(s.el),this.el.object3D.getWorldPosition(this.__testA),s.el.object3D.getWorldPosition(this.__testB),(o=this.__testA.distanceToSquared(this.__testB))<r&&(r=o,h=s.el));return h?{intersectedEls:a,nearestEl:h}:null},addIntersection:function(t){-1===this.intersectedEls.indexOf(t)&&(0!==this.intersectedEls.length||this.el.is("colliding")||this.el.addState("colliding"),this.intersectedEls.push(t),this.el.emit("hitstart",{el:t,intersectedEls:this.intersectedEls,nearestEl:this.nearestEl},!1),t.emit("hitstart",{el:t},!1))},removeIntersection:function(t){if(-1!==this.intersectedEls.indexOf(t)){var e=this.intersectedEls.indexOf(t);this.intersectedEls.splice(e,1),this.el.emit("hitend",{clearedEl:t,intersectedEls:this.intersectedEls},!1),t.emit("hitend",{clearedEl:t,intersectedEls:this.intersectedEls},!1)}0===this.intersectedEls.length&&this.el.is("colliding")&&this.el.removeState("colliding")},updateIntersections:function(){var t=this.groupManager.getGroup(this.data.collidesWith);if(this.__stepMax=t.length,!(this.__stepMax<1)){var e;for(this.__distanceNearest=1/0,this.__distanceTest=0,this.__intersections.splice(0,this.__intersections.length),this.__intersectionsCleared.splice(0,this.__intersectionsCleared.length),this.__nearestEl=null,this.__step=0,this.__step=0;this.__step<this.__stepMax;this.__step++)1==(e=t[this.__step].components.collider).data.enabled&&(1==this.AABB.intersectsBox(e.AABB)?(this.el.object3D.getWorldPosition(this.__testA),e.el.object3D.getWorldPosition(this.__testB),this.__distanceTest=this.__testA.distanceToSquared(this.__testB),this.__distanceTest<this.__distanceNearest&&(this.__distanceNearest=this.__distanceTest,this.__nearestEl=e.el),this.__intersections.push(e.el)):this.__intersectionsCleared.push(e.el));for(this.nearestEl=this.__nearestEl,this.__stepMax=this.__intersections.length,this.__step=0;this.__step<this.__stepMax;this.__step++)this.addIntersection(this.__intersections[this.__step]);for(this.__stepMax=this.__intersectionsCleared.length,this.__step=0;this.__step<this.__stepMax;this.__step++)this.removeIntersection(this.__intersectionsCleared[this.__step])}},tick:function(t,e){this.subscribed&&0!=this.data.enabled&&(this.__elapsed=this.__elapsed+e,this.__elapsed<this.data.interval||(this.__elapsed=0,!0!==this.data.static&&this.updateAABB(),!0===this.data.autoRefresh&&this.updateIntersections()))},remove:function(){"auto"==this.data.bounds&&this.el.object3DMap.proxy&&this.el.removeAttribute("proxy")}}),"collider-proxy-system":AFRAME.registerSystem("proxy",{schema:{debug:{type:"boolean",default:!0}},init:function(){this.material=new THREE.MeshBasicMaterial({wireframe:!0,color:"cyan",visible:!0})}}),"collider-proxy-component":AFRAME.registerComponent("proxy",{schema:{shape:{type:"string",default:"box",oneOf:["box","oct","sphere"]},orient:{type:"vec3",default:{x:0,y:0,z:0}},offset:{type:"vec3",default:{x:0,y:0,z:0}},size:{type:"vec3",default:{x:1,y:1,z:1}},debug:{type:"boolean",default:!0}},init:function(){switch(this.data.shape){case"sphere":this.geometry=new THREE.SphereBufferGeometry(this.data.size.x,this.data.size.y,this.data.size.z);break;case"oct":this.geometry=new THREE.OctahedronBufferGeometry(this.data.size.x,0);break;case"box":default:this.geometry=new THREE.BoxBufferGeometry(this.data.size.x,this.data.size.y,this.data.size.z)}this.proxy=new THREE.Mesh(this.geometry,this.system.material),this.setRotation=this.setRotation.bind(this),this.setPosition=this.setPosition.bind(this),this.el.setObject3D("proxy",this.proxy),this.el.object3DMap.proxy.updateWorldMatrix(!0,!0),this.el.object3DMap.proxy.updateMatrixWorld(!0)},setPosition:function(t){this.proxy.position.set(t.x,t.y,t.z)},setRotation:function(t){this.proxy.rotation.set(THREE.Math.degToRad(t.x),THREE.Math.degToRad(t.y),THREE.Math.degToRad(t.z))},remove:function(){this.el.object3DMap.proxy&&this.el.removeObject3D("proxy")},update:function(t){if(this.setRotation(this.data.orient),this.setPosition(this.data.offset),this.proxy.visible=this.data.debug,t.size&&t.shape)return 0==AFRAME.utils.deepEqual(t.size,this.data.size)||t.shape!==this.data.shape?(this.remove(),void this.init()):void 0}}),constraint:AFRAME.registerComponent("constraint",{schema:{parent:{type:"selector"}},init:function(){this.originalParent=this.el.object3D.parent},update:function(t){this.data.parent.object3DMap.constraint||this.data.parent.setObject3D("constraint",new THREE.Group),this.data.parent.object3DMap.constraint.attach(this.el.object3D),this.el.addState("constrained"),t.parent&&t.parent!==this.data.parent&&(this.el.emit("constraintchanged",{parent:this.data.parent,el:this.el},!0),t.parent.emit("constraintchanged",{parent:this.data.parent,el:this.el},!0)),t.parent||(this.el.emit("constraintadded",{parent:this.data.parent,el:this.el},!0),this.data.parent.emit("constraintadded",{parent:this.data.parent,el:this.el},!0))},remove:function(){this.originalParent.attach(this.el.object3D),this.el.removeState("constrained"),this.el.emit("constraintremoved",{parent:this.data.parent,el:this.el},!1),this.data.parent.emit("constraintremoved",{parent:this.data.parent,el:this.el},!1)}}),aligner:AFRAME.registerComponent("aligner",{schema:{orient:{type:"vec3",default:{x:0,y:0,z:0}},offset:{type:"vec3",default:{x:0,y:0,z:0}},debug:{type:"boolean",default:!1}},multiple:!0,init:function(){this.id&&(this.origin=new THREE.Group,1==this.data.debug&&(this.helper=AFRAME.utils.axishelper(),this.origin.add(this.helper),this.helper.scale.multiplyScalar(.01)),this.setRotation=this.setRotation.bind(this),this.setPosition=this.setPosition.bind(this),this.origin.name=this.id,this.el.setObject3D(`aligner__${this.id}`,this.origin))},setPosition:function(t){this.origin.position.set(t.x,t.y,t.z)},setRotation:function(t){this.origin.rotation.set(THREE.Math.degToRad(t.x),THREE.Math.degToRad(t.y),THREE.Math.degToRad(t.z))},remove:function(){this.el.object3DMap[`aligner__${this.id}`]&&this.el.removeObject3D(`aligner__${this.id}`)},update:function(){this.id&&(this.setRotation(this.data.orient),this.setPosition(this.data.offset),this.origin.visible=this.data.debug)}}),speed:AFRAME.registerComponent("speed",{dependencies:["position","rotation","scale","velocity"],schema:{type:"vec3",default:new THREE.Vector3(0,0,0)},init:function(){}}),finger:AFRAME.registerComponent("point-controls",{schema:{offset:{type:"vec3",default:{x:0,y:0,z:0}},hand:{type:"string",default:"right",oneOf:["right","left"]},enabled:{type:"boolean",default:!0},debug:{type:"boolean",default:!0}},init:function(){this.fingerID=`finger-${this.data.hand}-${AFRAME.utils.makeId(5)}`,this.fingerEl=document.createElement("a-entity"),this.fingerEl.setAttribute("grp__poke",""),this.fingerEl.setAttribute("grp__fingers",""),this.fingerEl.setAttribute(`grp__finger-${this.data.hand}`,""),this.fingerEl.setAttribute("proxy",{shape:"box",offset:{x:"right"===this.data.hand?.039:-.036,y:-.008,z:-.064},size:{x:.013,y:.013,z:.016},debug:this.data.debug}),this.fingerEl.setAttribute("collider",{enabled:this.data.enabled,bounds:"proxy",interval:10,static:!1,autoRefresh:!0,collidesWith:"pokeable",debug:this.data.debug}),this.onLoad=this.onLoad.bind(this),AFRAME.utils.entity.onLoad(this.el,this.onLoad,this)},onLoad:function(){this.el.appendChild(this.fingerEl)}}),"velocity-system":AFRAME.registerSystem("velocity",{schema:{interval:{type:"number",default:30},debug:{type:"boolean",default:!0}}}),velocity:AFRAME.registerComponent("velocity",{dependencies:["position","rotation","scale"],schema:{type:"vec3",default:new THREE.Vector3(0,0,0)},init:function(){if(this.interval=Math.ceil(1e3/this.system.data.interval),this.__elapsed=0,this.WorldPosition=new THREE.Vector3,this.WorldPositionLast=new THREE.Vector3,this.step=new THREE.Vector3,this.stepDelta=new THREE.Vector3,this.stepNext=new THREE.Vector3,1==this.system.data.debug){var t=this;this.speedometer=document.createElement("a-entity");t.el.appendChild(this.speedometer),t.speedometer.setAttribute("text",{align:"center",width:"0.25",anchor:"align",baseline:"center",wrapCount:20}),t.speedometer.updateText=function(e){e=String(e),t.speedometer.setAttribute("text",{value:e})},AFRAME.utils.entity.onModel(this.el,(function(){var t=(new THREE.Box3).setFromObject(this.el.object3DMap.mesh),e=new THREE.Vector3;t.getSize(e),this.speedometer.object3D.translateY(e.y/2+.1)}),this)}},tick:function(t,e){this.__elapsed+=e,this.__elapsed<this.interval||(this.__elapsed=0,this.el.object3D.getWorldPosition(this.WorldPosition),this.stepDelta.copy(this.WorldPosition).sub(this.WorldPositionLast),this.data.copy(this.stepDelta),this.speedometer&&this.speedometer.updateText(`x: ${this.data.x.toFixed(2)}, \ny: ${this.data.y.toFixed(2)},\nz: ${this.data.z.toFixed(2)}`),this.WorldPositionLast.copy(this.WorldPosition))}})}},function(t,e,i){i.r(e),function(t){var i=function(){this._tweens={},this._tweensAddedDuringUpdate={}};i.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var i=Object.keys(this._tweens);if(0===i.length)return!1;for(t=void 0!==t?t:s.now();i.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<i.length;n++){var o=this._tweens[i[n]];o&&!1===o.update(t)&&(o._isPlaying=!1,e||delete this._tweens[i[n]])}i=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var n,s=new i;s.Group=i,s._nextId=0,s.nextId=function(){return s._nextId++},"undefined"==typeof self&&void 0!==t&&t.hrtime?s.now=function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?s.now=self.performance.now.bind(self.performance):void 0!==Date.now?s.now=Date.now:s.now=function(){return(new Date).getTime()},s.Tween=function(t,e){this._isPaused=!1,this._pauseStart=null,this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=s.Easing.Linear.None,this._interpolationFunction=s.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||s,this._id=s.nextId()},s.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},isPaused:function(){return this._isPaused},to:function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},duration:function(t){return this._duration=t,this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?s.now()+parseFloat(t):t:s.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(void 0===this._valuesStart[e]&&(this._valuesStart[e]=this._object[e]),this._valuesStart[e]instanceof Array==!1&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0),this},pause:function(t){return this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=void 0===t?s.now():t,this._group.remove(this),this)},resume:function(t){return this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=(void 0===t?s.now():t)-this._pauseStart,this._pauseStart=0,this._group.add(this),this):this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onRepeat:function(t){return this._onRepeatCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,i,n;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(t-this._startTime)/this._duration,i=0===this._duration||i>1?1:i,n=this._easingFunction(i),this._valuesEnd)if(void 0!==this._valuesStart[e]){var s=this._valuesStart[e]||0,o=this._valuesEnd[e];o instanceof Array?this._object[e]=this._interpolationFunction(o,n):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?s+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[e]=s+(o-s)*n))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(this._repeat>0){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var r=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,h=this._chainedTweens.length;a<h;a++)this._chainedTweens[a].start(this._startTime+this._duration);return!1}return!0}},s.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-s.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*s.Easing.Bounce.In(2*t):.5*s.Easing.Bounce.Out(2*t-1)+.5}}},s.Interpolation={Linear:function(t,e){var i=t.length-1,n=i*e,o=Math.floor(n),r=s.Interpolation.Utils.Linear;return e<0?r(t[0],t[1],n):e>1?r(t[i],t[i-1],i-n):r(t[o],t[o+1>i?i:o+1],n-o)},Bezier:function(t,e){for(var i=0,n=t.length-1,o=Math.pow,r=s.Interpolation.Utils.Bernstein,a=0;a<=n;a++)i+=o(1-e,n-a)*o(e,a)*t[a]*r(n,a);return i},CatmullRom:function(t,e){var i=t.length-1,n=i*e,o=Math.floor(n),r=s.Interpolation.Utils.CatmullRom;return t[0]===t[i]?(e<0&&(o=Math.floor(n=i*(1+e))),r(t[(o-1+i)%i],t[o],t[(o+1)%i],t[(o+2)%i],n-o)):e<0?t[0]-(r(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[i]-(r(t[i],t[i],t[i-1],t[i-1],n-i)-t[i]):r(t[o?o-1:0],t[o],t[i<o+1?i:o+1],t[i<o+2?i:o+2],n-o)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var i=s.Interpolation.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:(n=[1],function(t){var e=1;if(n[t])return n[t];for(var i=t;i>1;i--)e*=i;return n[t]=e,e}),CatmullRom:function(t,e,i,n,s){var o=.5*(i-t),r=.5*(n-e),a=s*s;return(2*e-2*i+o+r)*(s*a)+(-3*e+3*i-2*o-r)*a+o*s+e}}},s.version="18.5.0",e.default=s}.call(this,i(3))},function(t,e){var i,n,s=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(t){n=r}}();var h,l=[],d=!1,u=-1;function c(){d&&h&&(d=!1,h.length?l=h.concat(l):u=-1,l.length&&p())}function p(){if(!d){var t=a(c);d=!0;for(var e=l.length;e;){for(h=l,l=[];++u<e;)h&&h[u].run();u=-1,e=l.length}h=null,d=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function b(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new g(t,e)),1!==l.length||d||a(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=b,s.addListener=b,s.once=b,s.off=b,s.removeListener=b,s.removeAllListeners=b,s.emit=b,s.prependListener=b,s.prependOnceListener=b,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},,,,,,function(t,e,i){i(0),i(1)}]);