/*! For license information please see google-poly-component.min.js.LICENSE.txt */
var e,t;e={2898:e=>{e.exports={system:AFRAME.registerSystem("google-poly",{schema:{type:"string"},__getAsset:function(e,t){if(null==THREE.Cache.get(e))this.__loadAsset(e,t);else{var s=THREE.Cache.get(e);this._create(s,t,e)}},_create:function(e,t){e.updateMatrixWorld(!0);var s=new THREE.Vector3,o=new THREE.Vector3,n=(new THREE.Box3).setFromObject(e);n.getSize(s);var r=Math.max.apply(Math,[s.x,s.y,s.z]);e.scale.multiplyScalar(1/r),e.scale.multiplyScalar(t.components.poly.data.size),n.setFromObject(e),n.getCenter(o),e.position.sub(o);var a=new THREE.Object3D;a.add(e),t.setObject3D("mesh",a)},__loadAsset:function(e,t){const s=this.data;var o=this,n=`https://poly.googleapis.com/v1/assets/${e}/?key=${s}`,r=new XMLHttpRequest;r.open("GET",n,!0),r.addEventListener("load",(function(s){var n,r,a,i,l,c=JSON.parse(s.target.response),d=function(e){return c.formats.find((t=>t.formatType===e))};if(null==d("GLTF2"))if(console.warn("Cannot load model as GLTF. Attempting to load OBJ"),null==d("OBJ"))console.error("Only GLTF and OBJ are supported at this time");else{var p=d("OBJ");r=(n=p).root,a=n.resources.find((e=>e.url.endsWith("mtl"))),i=r.url.slice(0,r.url.indexOf(r.relativePath)),(l=new THREE.MTLLoader).setCrossOrigin(!0),l.setMaterialOptions({ignoreZeroRGBs:!0}),l.setTexturePath(i),l.load(a.url,(function(s){var n=new THREE.OBJLoader;n.setMaterials(s),n.load(r.url,(function(s){THREE.Cache.add(e,s),o._create(s,t,e)}))}))}else!function(s){var n=s.root,r=new THREE.GLTFLoader;r.setCrossOrigin(!0),r.load(n.url,(function(s){THREE.Cache.add(e,s.scene),o._create(s.scene,t,e)}),(function(e){console.log(e.loaded/e.total*100+"% loaded")}),(function(e){console.error(e)}))}(d("GLTF2"))})),r.send(null)},init:function(){THREE.Cache.enabled=!0,this.__getAsset=this.__getAsset.bind(this),this.__loadAsset=this.__loadAsset.bind(this),this._create=this._create.bind(this)}}),component:AFRAME.registerComponent("poly",{schema:{src:{type:"string",default:"5vbJ5vildOq"},size:{type:"number",default:1}},init:function(){var e=this.el,t=this.data;this.system=this.el.sceneEl.systems["google-poly"],this.system.__getAsset(t.src,e)}}),primitive:AFRAME.registerPrimitive("a-poly",{defaultComponents:{position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},poly:{size:1,align:"center"}},mappings:{src:"poly.src",size:"poly.size"}})}}},t={},function s(o){if(t[o])return t[o].exports;var n=t[o]={exports:{}};return e[o](n,n.exports,s),n.exports}(2898);